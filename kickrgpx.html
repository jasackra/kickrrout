<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kickr Live Tracker</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
:root{
  --topbar-h:64px;
  --accent:#00aaff;
  --bg-panel: rgba(17,17,17,0.85);
  --bg-controls: rgba(255,255,255,0.85);
  --panel-radius:12px;
}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;}
#map{position:fixed; inset:0; z-index:1;}

/* Topbar */
#topbar{
  position:fixed; top:8px; left:8px; right:8px; height:var(--topbar-h);
  z-index:10010; background:var(--bg-panel); color:#fff;
  border-radius:var(--panel-radius); display:flex; align-items:center;
  justify-content:space-around; padding:8px 12px; box-shadow:0 6px 18px rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
}
#topbar .cell{display:flex;flex-direction:column;align-items:center;min-width:70px;}
#topbar .label{font-size:12px;color:rgba(255,255,255,0.75);font-weight:500}
#topbar .value{font-size:18px;font-weight:700;margin-top:4px}

/* Controls below topbar */
#controls{
  position:fixed; top:calc(8px + var(--topbar-h) + 6px); left:8px; right:8px; z-index:10011;
  background:var(--bg-controls); padding:6px 10px; border-radius:10px;
  display:flex; flex-wrap:wrap; gap:6px; justify-content:flex-start; align-items:center;
  box-shadow:0 6px 14px rgba(0,0,0,0.25); backdrop-filter: blur(2px);
  opacity:0.95;
}
#controls input[type="number"]{width:64px;padding:4px;border-radius:6px;border:1px solid #ddd;font-size:14px;}
#controls button{border:0;padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:600;font-size:14px;}
#connectBtn{background:#666;color:#fff;transition:all .22s;}
#connectBtn.connecting{background:#ffcc00;color:#111;}
#connectBtn.connected{background:#0bbf4a;color:#fff;}
#loadFileBtn{background:var(--accent);color:#fff;}
#fullscreenBtn{background:#444;color:#fff;}

/* Summary modal */
#summary{
  position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); z-index:10020;
  background:#111;color:#fff;padding:18px;border-radius:12px;display:none;min-width:260px;
  box-shadow:0 12px 30px rgba(0,0,0,0.5);
}
#summary button{margin-top:12px;background:#0bbf4a;color:#fff;border-radius:8px;padding:8px 12px;border:0}

/* Hidden file input */
#gpxfile{display:none}
</style>
</head>
<body>

<!-- Topbar with live values
